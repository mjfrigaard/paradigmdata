{
  "hash": "217f5d1223071439ab8a756afc5bbc35",
  "result": {
    "markdown": "---\ntitle: \"Writing modular code with `box`\"\nauthor: \"Martin Frigaard\"\ndate: \"2023-04-05\"\nimage: \"image.png\"\ntoc: true\ntoc-depth: 5\ntoc-title: 'Contents'\ntoc-location: \"left\"\n\nfig-align: center\ncode-link: true\nfontsize: '10'\n\ncallout-icon: false\n\nfreeze: true\n\nexecute:\n  echo: true\n  warning: false\n  eval: false\n---\n\n\n\n\n<!--\nhttps://mjfrigaard.github.io/posts/vanilla-shiny/\n\nhttps://mjfrigaard.github.io/posts/my-pkg-app/\n\nhttps://mjfrigaard.github.io/posts/my-golem-app/\n\nhttps://mjfrigaard.github.io/posts/my-leprechaun-app/\n\nhttps://mjfrigaard.github.io/posts/my-rhino-app/\n-->\n\n\n\n:::: {.callout-important collapse='false'}\n\n## ALERT!\n\n::: {style='font-size: 0.90em; color: #696969;'}\n\n**This post is currently under development. Thank you for your patience.**\n\n::: \n\n::::\n\n\n## What is `box`?\n\n`box` is a package...\n\n## How `box` works\n\nTo understand how `box` works, let's refresh how we normally interact with packages and their functions when using R and developing packages:\n\n1. Assume I want to use the `foo()` function from the `pkg` package. The first step is to install it with `install.packages(\"pkg\")`\n\n2. To use the functions in `pkg`: \n\n    -   I need to run `library(pkg)` in my R session, which loads the `pkg` namespace '*and attach[es] it on the search list.*'\n        \n    -   If I try to use a function (`foo()`) from a package (`pkg`) that hasn't been loaded with `library(pkg)` or `require(pkg)`, I see the following:\n        \n        ::: {style=\"font-size: 0.80em;\"}\n        ``` r\n        foo(x)\n        Error in foo(x) : could not find function 'foo'\n        ```\n        :::\n    \n    -   This error can be confusing, because it's not telling me if the package hasn't been *installed* or if the package hasn't been *loaded*.\n  \n    -   If I try to use a function (`foo()`) from a package (`pkg`) that hasn't been installed with `install.packages()`, I get the following error:\n    \n        ::: {style=\"font-size: 0.80em;\"}\n        ``` r\n        pkg::foo(x)\n        Error in loadNamespace(x) : there is no package called ‘pkg’\n        ```\n        :::\n        \n        -   After installing `pkg`, I can get around using `library(pkg)` by being explicit and using `pkg::foo()`, which tells R I want to use the `foo()` function from the `pkg` namespace\n    \n    -   Read more about namespaces in [Advanced R](https://adv-r.hadley.nz/environments.html?q=namespace#namespaces) and [R packages](https://r-pkgs.org/dependencies-mindset-background.html#sec-dependencies-namespace-motivation).\n        \n    \n3. If I am developing an R package, I can include `pkg` functions in my package by using `roxygen2` tags (i.e., `#' @importFrom pkg foo`)\n\n    -   When I use `devtools::document()`, the tags are converted into [**directives**](https://r-pkgs.org/dependencies-mindset-background.html#sec-dependencies-NAMESPACE-file) in the `NAMESPACE` (i.e., `importFrom(pkg,foo)`) \n\n    -   I also need to use `usethis::use_package(\"pkg\")` to include `pkg` in the `DESCRIPTION` under `Imports:`\n\nThe table below shows the connection between `roxygen2` tags, the resulting `NAMESPACE` entry, and what should be listed in the `DESCRIPTION` (this is also covered in [`myPkgApp`](https://mjfrigaard.github.io/posts/my-pkg-app/#document))\n\n\n<br>\n\n::: {style=\"font-size: 0.60em;\"}\n\n\n\n:::: {.callout-note collapse='false'}\n\n## Refresher on `roxygen2`, `NAMESPACE` & `DESCRPTION`\n\n::: {style='font-size: 0.90em; color: #696969;'}\n\n<table class=\"table\" style=\"margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> roxygen2 tag </th>\n   <th style=\"text-align:left;\"> NAMESPACE directive </th>\n   <th style=\"text-align:right;\"> DESCRIPTION </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> @importFrom </td>\n   <td style=\"text-align:left;\"> importFrom() : import selected object from another NAMESPACE </td>\n   <td style=\"text-align:right;\"> Imports: </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> @import </td>\n   <td style=\"text-align:left;\"> import(): import all objects from another package’s NAMESPACE. </td>\n   <td style=\"text-align:right;\"> Imports: </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> @export </td>\n   <td style=\"text-align:left;\"> export() : export the function, method, generic, or class so it’s available outside of the package (in the NAMESPACE) </td>\n   <td style=\"text-align:right;\"> Nothing </td>\n  </tr>\n</tbody>\n</table>\n\n::: \n\n::::\n\n\n:::\n\n<br>\n\n## Using `box`",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}